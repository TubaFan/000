<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>我的个人网页</title>
    <style>
        /* 样式部分 */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        #language-switch {
            position: fixed;
            top: 10px;
            right: 10px;
        }
        nav {
            background-color: #333;
        }
        nav ul {
            list-style-type: none;
            padding: 10px;
            margin: 0;
            display: flex;
        }
        nav ul li {
            position: relative;
            margin-right: 20px;
        }
        nav ul li a {
            color: #fff;
            text-decoration: none;
            padding: 5px;
        }
        nav ul li ul {
            display: none;
            position: absolute;
            background-color: #444;
            top: 30px;
            left: 0;
            list-style-type: none;
            padding: 0;
        }
        nav ul li:hover > ul {
            display: block;
        }
        nav ul li ul li {
            width: 150px;
        }
        nav ul li ul li a {
            padding: 10px;
            display: block;
        }
        nav ul li ul li ul {
            left: 150px;
            top: 0;
        }
        #content {
            padding: 20px;
        }
        .section {
            display: none;
        }
        #cart {
            position: fixed;
            top: 50px;
            right: 10px;
            background-color: #f8f8f8;
            padding: 10px;
            border: 1px solid #ddd;
        }
        #cart h3 {
            margin-top: 0;
        }
        #cart-items {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        #cart-items li {
            margin-bottom: 5px;
        }
        .product {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
        }
        .product h3 {
            margin-top: 0;
        }
        .product button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="language-switch">
        <button onclick="switchLanguage('zh')">中文</button>
        <button onclick="switchLanguage('en')">English</button>
    </div>

    <div id="cart">
        <h3 id="cart-title">购物车</h3>
        <ul id="cart-items"></ul>
        <button onclick="checkout()" id="checkout-button">结算</button>
    </div>

    <h1 id="title">我的个人网页</h1>

    <nav>
        <ul>
            <li><a href="#" onclick="showSection('home')">主页</a></li>
            <li>
                <a href="#" onclick="showSection('instruments')">乐器商城</a>
                <ul id="instrument-menu">
                    <!-- 动态生成菜单 -->
                </ul>
            </li>
            <li><a href="#" onclick="showSection('contact')">联系方式</a></li>
        </ul>
    </nav>

    <div id="content">
        <!-- 内容区域 -->
        <div id="home" class="section">
            <h2>欢迎来到我的个人主页！</h2>
            <p>这里是我的个人简介。</p>
        </div>

        <div id="instruments" class="section">
            <h2>乐器商城</h2>
            <div id="product-list">
                <!-- 乐器列表 -->
            </div>
        </div>

        <div id="contact" class="section">
            <h2>联系方式</h2>
            <p>邮箱：example@example.com</p>
        </div>
    </div>

    <script>
        // 内容数据
        var content = {
            'zh': {
                'title': '我的个人网页',
                'cartTitle': '购物车',
                'checkoutButton': '结算',
                'emptyCart': '购物车为空。',
                'home': {
                    'title': '欢迎来到我的个人主页！',
                    'content': '这里是我的个人简介。'
                },
                'instruments': {
                    'title': '乐器商城',
                    'categories': {
                        '弦乐器': {
                            '弓弦乐器': {
                                '小提琴': {
                                    'price': 5000,
                                    'description': '小提琴是一种弦乐器。',
                                },
                                '大提琴': {
                                    'price': 8000,
                                    'description': '大提琴是一种低音弦乐器。'
                                }
                            },
                            '弹拨乐器': {
                                '吉他': {
                                    'price': 3000,
                                    'description': '吉他是一种弹拨乐器。'
                                },
                                '古筝': {
                                    'price': 7000,
                                    'description': '古筝是中国传统乐器。'
                                }
                            }
                        },
                        '管乐器': {
                            '木管乐器': {
                                '长笛': {
                                    'price': 2000,
                                    'description': '长笛是一种木管乐器。'
                                },
                                '单簧管': {
                                    'price': 2500,
                                    'description': '单簧管是一种单簧木管乐器。'
                                }
                            },
                            '铜管乐器': {
                                '小号': {
                                    'price': 3500,
                                    'description': '小号是一种铜管乐器。'
                                },
                                '长号': {
                                    'price': 4000,
                                    'description': '长号是一种低音铜管乐器。'
                                }
                            }
                        }
                    }
                },
                'contact': {
                    'title': '联系方式',
                    'content': '邮箱：example@example.com'
                },
                'nav': {
                    'home': '主页',
                    'instruments': '乐器商城',
                    'contact': '联系方式'
                },
                'addToCart': '加入购物车',
                'cart': '购物车',
                'total': '总计',
                'checkoutMessage': '感谢您的购买！'
            },
            'en': {
                'title': 'My Personal Website',
                'cartTitle': 'Shopping Cart',
                'checkoutButton': 'Checkout',
                'emptyCart': 'Your cart is empty.',
                'home': {
                    'title': 'Welcome to My Personal Homepage!',
                    'content': 'This is my personal introduction.'
                },
                'instruments': {
                    'title': 'Instrument Store',
                    'categories': {
                        'String Instruments': {
                            'Bowed Strings': {
                                'Violin': {
                                    'price': 5000,
                                    'description': 'The violin is a string instrument.'
                                },
                                'Cello': {
                                    'price': 8000,
                                    'description': 'The cello is a bass string instrument.'
                                }
                            },
                            'Plucked Strings': {
                                'Guitar': {
                                    'price': 3000,
                                    'description': 'The guitar is a plucked string instrument.'
                                },
                                'Guzheng': {
                                    'price': 7000,
                                    'description': 'The guzheng is a traditional Chinese instrument.'
                                }
                            }
                        },
                        'Wind Instruments': {
                            'Woodwind': {
                                'Flute': {
                                    'price': 2000,
                                    'description': 'The flute is a woodwind instrument.'
                                },
                                'Clarinet': {
                                    'price': 2500,
                                    'description': 'The clarinet is a single-reed woodwind instrument.'
                                }
                            },
                            'Brass': {
                                'Trumpet': {
                                    'price': 3500,
                                    'description': 'The trumpet is a brass instrument.'
                                },
                                'Trombone': {
                                    'price': 4000,
                                    'description': 'The trombone is a bass brass instrument.'
                                }
                            }
                        }
                    }
                },
                'contact': {
                    'title': 'Contact Information',
                    'content': 'Email: example@example.com'
                },
                'nav': {
                    'home': 'Home',
                    'instruments': 'Instrument Store',
                    'contact': 'Contact'
                },
                'addToCart': 'Add to Cart',
                'cart': 'Cart',
                'total': 'Total',
                'checkoutMessage': 'Thank you for your purchase!'
            }
        };

        var currentLanguage = 'zh';
        var cart = [];

        // 切换语言函数
        function switchLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('title').innerText = content[lang]['title'];
            document.getElementById('cart-title').innerText = content[lang]['cartTitle'];
            document.getElementById('checkout-button').innerText = content[lang]['checkoutButton'];

            var navLinks = document.querySelectorAll('nav ul li a');
            navLinks[0].innerText = content[lang]['nav']['home'];
            navLinks[1].innerText = content[lang]['nav']['instruments'];
            navLinks[2].innerText = content[lang]['nav']['contact'];

            // 更新内容
            var sections = document.querySelectorAll('.section');
            sections.forEach(function(section) {
                if (section.style.display !== 'none') {
                    updateContent(section.id);
                }
            });

            // 更新购物车
            updateCart();
        }

        // 显示指定板块
        function showSection(sectionId) {
            hideAllSections();
            document.getElementById(sectionId).style.display = 'block';
            updateContent(sectionId);
        }

        // 隐藏所有板块
        function hideAllSections() {
            var sections = document.querySelectorAll('.section');
            sections.forEach(function(section) {
                section.style.display = 'none';
            });
        }

        // 更新内容
        function updateContent(sectionId) {
            if (sectionId === 'home' || sectionId === 'contact') {
                document.querySelector('#' + sectionId + ' h2').innerText = content[currentLanguage][sectionId]['title'];
                document.querySelector('#' + sectionId + ' p').innerText = content[currentLanguage][sectionId]['content'];
            } else if (sectionId === 'instruments') {
                document.querySelector('#instruments h2').innerText = content[currentLanguage]['instruments']['title'];
                generateProductList();
            }
        }

        // 生成乐器菜单
        function generateInstrumentMenu() {
            var menu = document.getElementById('instrument-menu');
            menu.innerHTML = '';
            var categories = content[currentLanguage]['instruments']['categories'];
            for (var category in categories) {
                var li = document.createElement('li');
                var a = document.createElement('a');
                a.href = '#';
                a.innerText = category;
                a.onclick = (function(cat) {
                    return function() {
                        showSection('instruments');
                        filterProducts(cat);
                    };
                })(category);
                li.appendChild(a);

                var subUl = document.createElement('ul');
                for (var subCategory in categories[category]) {
                    var subLi = document.createElement('li');
                    var subA = document.createElement('a');
                    subA.href = '#';
                    subA.innerText = subCategory;
                    subA.onclick = (function(cat, subCat) {
                        return function() {
                            showSection('instruments');
                            filterProducts(cat, subCat);
                        };
                    })(category, subCategory);
                    subLi.appendChild(subA);
                    subUl.appendChild(subLi);
                }
                li.appendChild(subUl);
                menu.appendChild(li);
            }
        }

        // 生成乐器列表
        function generateProductList() {
            var productList = document.getElementById('product-list');
            productList.innerHTML = '';
            var categories = content[currentLanguage]['instruments']['categories'];
            for (var category in categories) {
                for (var subCategory in categories[category]) {
                    for (var productName in categories[category][subCategory]) {
                        var product = categories[category][subCategory][productName];
                        createProductCard(productName, product);
                    }
                }
            }
        }

        // 创建乐器卡片
        function createProductCard(name, product) {
            var productList = document.getElementById('product-list');
            var productDiv = document.createElement('div');
            productDiv.className = 'product';

            var h3 = document.createElement('h3');
            h3.innerText = name;
            productDiv.appendChild(h3);

            var p = document.createElement('p');
            p.innerText = product.description;
            productDiv.appendChild(p);

            var priceP = document.createElement('p');
            priceP.innerText = content[currentLanguage]['total'] + ': ¥' + product.price;
            productDiv.appendChild(priceP);

            var button = document.createElement('button');
            button.innerText = content[currentLanguage]['addToCart'];
            button.onclick = function() {
                addToCart(name, product.price);
            };
            productDiv.appendChild(button);

            productList.appendChild(productDiv);
        }

        // 过滤乐器列表
        function filterProducts(category, subCategory) {
            var productList = document.getElementById('product-list');
            productList.innerHTML = '';
            var categories = content[currentLanguage]['instruments']['categories'];
            if (categories[category]) {
                if (subCategory) {
                    var products = categories[category][subCategory];
                    for (var productName in products) {
                        var product = products[productName];
                        createProductCard(productName, product);
                    }
                } else {
                    for (var subCat in categories[category]) {
                        var products = categories[category][subCat];
                        for (var productName in products) {
                            var product = products[productName];
                            createProductCard(productName, product);
                        }
                    }
                }
            }
        }

        // 添加到购物车
        function addToCart(name, price) {
            cart.push({name: name, price: price});
            updateCart();
            alert(name + ' ' + content[currentLanguage]['addToCart']);
        }

        // 更新购物车
        function updateCart() {
            var cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            var total = 0;
            if (cart.length === 0) {
                var li = document.createElement('li');
                li.innerText = content[currentLanguage]['emptyCart'];
                cartItems.appendChild(li);
            } else {
                cart.forEach(function(item) {
                    var li = document.createElement('li');
                    li.innerText = item.name + ' - ¥' + item.price;
                    cartItems.appendChild(li);
                    total += item.price;
                });
                var totalLi = document.createElement('li');
                totalLi.innerText = content[currentLanguage]['total'] + ': ¥' + total;
                cartItems.appendChild(totalLi);
            }
        }

        // 结算
        function checkout() {
            if (cart.length === 0) {
                alert(content[currentLanguage]['emptyCart']);
            } else {
                alert(content[currentLanguage]['checkoutMessage']);
                cart = [];
                updateCart();
            }
        }

        // 初始化页面
        window.onload = function() {
            switchLanguage('zh');
            generateInstrumentMenu();
            showSection('home');
        };
    </script>
</body>
</html>
