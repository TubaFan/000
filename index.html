<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>我的个人网页</title>
    <style>
        /* 重置样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        /* 全局样式 */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
        }
        a {
            text-decoration: none;
            color: inherit;
        }
        ul {
            list-style-type: none;
        }
        /* 顶部导航栏 */
        header {
            background-color: #2c3e50;
            padding: 20px;
            position: fixed;
            width: 100%;
            z-index: 1000;
        }
        .logo {
            color: #ecf0f1;
            font-size: 24px;
            font-weight: bold;
        }
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav-links {
            display: flex;
            align-items: center;
        }
        .nav-links li {
            position: relative;
            margin-left: 30px;
        }
        .nav-links > li > a {
            color: #ecf0f1;
            font-size: 16px;
            padding: 5px 0;
            transition: color 0.3s;
            cursor: pointer;
        }
        .nav-links > li > a:hover {
            color: #3498db;
        }
        /* 下拉菜单 */
        .dropdown-toggle {
            display: flex;
            align-items: center;
        }
        .dropdown-toggle::after {
            content: ' ▼';
            font-size: 12px;
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 35px;
            left: 0;
            background-color: #34495e;
            flex-direction: column;
            min-width: 150px;
            z-index: 999;
        }
        .dropdown-menu li {
            position: relative;
        }
        .dropdown-menu a {
            color: #ecf0f1;
            padding: 10px;
            display: block;
            transition: background-color 0.3s;
        }
        .dropdown-menu a:hover {
            background-color: #2c3e50;
        }
        .nav-links li.active > .dropdown-menu {
            display: flex;
        }
        /* 子下拉菜单 */
        .dropdown-menu .dropdown-toggle {
            justify-content: space-between;
        }
        .dropdown-menu .dropdown-menu {
            top: 0;
            left: 150px;
        }
        /* 语言切换 */
        .language-switch {
            display: flex;
            align-items: center;
        }
        .language-switch button {
            background: none;
            border: none;
            color: #ecf0f1;
            margin-left: 15px;
            font-size: 16px;
            cursor: pointer;
            transition: color 0.3s;
        }
        .language-switch button:hover {
            color: #3498db;
        }
        /* 主体内容 */
        .container {
            max-width: 1200px;
            margin: 100px auto 50px;
            padding: 20px;
        }
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        /* 主页样式 */
        #home {
            text-align: center;
        }
        #home h2 {
            font-size: 36px;
            margin-bottom: 20px;
        }
        /* 乐器商城样式 */
        #product-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        .product-card {
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            background-color: #fff;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0,0,0,0.1);
        }
        .product-image {
            width: 100%;
            height: 180px;
            background-color: #f0f0f0;
            background-size: cover;
            background-position: center;
        }
        .product-info {
            padding: 15px;
        }
        .product-info h3 {
            font-size: 20px;
            margin-bottom: 10px;
        }
        .product-info p {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }
        .product-info .price {
            font-size: 18px;
            color: #e74c3c;
            margin-bottom: 15px;
        }
        .product-info button {
            background-color: #e67e22;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .product-info button:hover {
            background-color: #d35400;
        }
        /* 购物车样式 */
        #cart {
            position: fixed;
            top: 80px;
            right: 20px;
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            width: 300px;
            max-height: 70vh;
            overflow-y: auto;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        #cart h3 {
            margin-bottom: 15px;
            font-size: 24px;
            color: #2c3e50;
        }
        #cart-items {
            list-style-type: none;
            padding: 0;
        }
        #cart-items li {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
            color: #2c3e50;
        }
        #cart .total {
            font-weight: bold;
            margin-top: 15px;
            font-size: 18px;
        }
        #cart button {
            width: 100%;
            background-color: #27ae60;
            color: #fff;
            border: none;
            padding: 10px 0;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s;
        }
        #cart button:hover {
            background-color: #229954;
        }
        /* 联系方式样式 */
        #contact {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }
        #contact h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }
        #contact p {
            font-size: 18px;
            color: #555;
        }
        /* 响应式设计 */
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                align-items: flex-start;
            }
            .nav-links {
                flex-direction: column;
                width: 100%;
            }
            .nav-links li {
                margin: 10px 0;
            }
            #cart {
                position: static;
                width: 100%;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- 顶部导航栏 -->
    <header>
        <nav class="container">
            <div class="logo" id="title">我的个人网页</div>
            <ul class="nav-links">
                <li><a href="#" onclick="showSection('home')">主页</a></li>
                <li>
                    <a href="#" class="dropdown-toggle" onclick="toggleMenu(event)">乐器商城</a>
                    <ul class="dropdown-menu" id="instrument-menu">
                        <!-- 动态生成菜单 -->
                    </ul>
                </li>
                <li><a href="#" onclick="showSection('contact')">联系方式</a></li>
            </ul>
            <div class="language-switch">
                <button onclick="switchLanguage('zh')">中文</button>
                <button onclick="switchLanguage('en')">English</button>
            </div>
        </nav>
    </header>

    <!-- 购物车 -->
    <div id="cart">
        <h3 id="cart-title">购物车</h3>
        <ul id="cart-items"></ul>
        <div class="total" id="cart-total"></div>
        <button onclick="checkout()" id="checkout-button">结算</button>
    </div>

    <!-- 主体内容 -->
    <div class="container">
        <div id="home" class="section active">
            <h2>欢迎来到我的个人主页！</h2>
            <p>这里是我的个人简介。</p>
        </div>

        <div id="instruments" class="section">
            <h2>乐器商城</h2>
            <div id="product-list">
                <!-- 乐器列表 -->
            </div>
        </div>

        <div id="contact" class="section">
            <h2>联系方式</h2>
            <p>邮箱：example@example.com</p>
        </div>
    </div>

    <script>
        // 内容数据
        var content = {
            'zh': {
                'title': '我的个人网页',
                'cartTitle': '购物车',
                'checkoutButton': '结算',
                'emptyCart': '购物车为空。',
                'home': {
                    'title': '欢迎来到我的个人主页！',
                    'content': '这里是我的个人简介。'
                },
                'instruments': {
                    'title': '乐器商城',
                    'categories': {
                        '弦乐器': {
                            '弓弦乐器': {
                                '小提琴': {
                                    'price': 5000,
                                    'description': '小提琴是一种弦乐器。',
                                    'image': 'https://example.com/violin.jpg'
                                },
                                '大提琴': {
                                    'price': 8000,
                                    'description': '大提琴是一种低音弦乐器。',
                                    'image': 'https://example.com/cello.jpg'
                                }
                            },
                            '弹拨乐器': {
                                '吉他': {
                                    'price': 3000,
                                    'description': '吉他是一种弹拨乐器。',
                                    'image': 'https://example.com/guitar.jpg'
                                },
                                '古筝': {
                                    'price': 7000,
                                    'description': '古筝是中国传统乐器。',
                                    'image': 'https://example.com/guzheng.jpg'
                                }
                            }
                        },
                        '管乐器': {
                            '木管乐器': {
                                '长笛': {
                                    'price': 2000,
                                    'description': '长笛是一种木管乐器。',
                                    'image': 'https://example.com/flute.jpg'
                                },
                                '单簧管': {
                                    'price': 2500,
                                    'description': '单簧管是一种单簧木管乐器。',
                                    'image': 'https://example.com/clarinet.jpg'
                                }
                            },
                            '铜管乐器': {
                                '小号': {
                                    'price': 3500,
                                    'description': '小号是一种铜管乐器。',
                                    'image': 'https://example.com/trumpet.jpg'
                                },
                                '长号': {
                                    'price': 4000,
                                    'description': '长号是一种低音铜管乐器。',
                                    'image': 'https://example.com/trombone.jpg'
                                }
                            }
                        }
                    }
                },
                'contact': {
                    'title': '联系方式',
                    'content': '邮箱：example@example.com'
                },
                'nav': {
                    'home': '主页',
                    'instruments': '乐器商城',
                    'contact': '联系方式'
                },
                'addToCart': '加入购物车',
                'cart': '购物车',
                'total': '总计',
                'checkoutMessage': '感谢您的购买！',
                'currency': '¥'
            },
            'en': {
                'title': 'My Personal Website',
                'cartTitle': 'Shopping Cart',
                'checkoutButton': 'Checkout',
                'emptyCart': 'Your cart is empty.',
                'home': {
                    'title': 'Welcome to My Personal Homepage!',
                    'content': 'This is my personal introduction.'
                },
                'instruments': {
                    'title': 'Instrument Store',
                    'categories': {
                        'String Instruments': {
                            'Bowed Strings': {
                                'Violin': {
                                    'price': 5000,
                                    'description': 'The violin is a string instrument.',
                                    'image': 'https://example.com/violin.jpg'
                                },
                                'Cello': {
                                    'price': 8000,
                                    'description': 'The cello is a bass string instrument.',
                                    'image': 'https://example.com/cello.jpg'
                                }
                            },
                            'Plucked Strings': {
                                'Guitar': {
                                    'price': 3000,
                                    'description': 'The guitar is a plucked string instrument.',
                                    'image': 'https://example.com/guitar.jpg'
                                },
                                'Guzheng': {
                                    'price': 7000,
                                    'description': 'The guzheng is a traditional Chinese instrument.',
                                    'image': 'https://example.com/guzheng.jpg'
                                }
                            }
                        },
                        'Wind Instruments': {
                            'Woodwind': {
                                'Flute': {
                                    'price': 2000,
                                    'description': 'The flute is a woodwind instrument.',
                                    'image': 'https://example.com/flute.jpg'
                                },
                                'Clarinet': {
                                    'price': 2500,
                                    'description': 'The clarinet is a single-reed woodwind instrument.',
                                    'image': 'https://example.com/clarinet.jpg'
                                }
                            },
                            'Brass': {
                                'Trumpet': {
                                    'price': 3500,
                                    'description': 'The trumpet is a brass instrument.',
                                    'image': 'https://example.com/trumpet.jpg'
                                },
                                'Trombone': {
                                    'price': 4000,
                                    'description': 'The trombone is a bass brass instrument.',
                                    'image': 'https://example.com/trombone.jpg'
                                }
                            }
                        }
                    }
                },
                'contact': {
                    'title': 'Contact Information',
                    'content': 'Email: example@example.com'
                },
                'nav': {
                    'home': 'Home',
                    'instruments': 'Instrument Store',
                    'contact': 'Contact'
                },
                'addToCart': 'Add to Cart',
                'cart': 'Cart',
                'total': 'Total',
                'checkoutMessage': 'Thank you for your purchase!',
                'currency': '$'
            }
        };

        var currentLanguage = 'zh';
        var cart = [];

        // 切换语言函数
        function switchLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('title').innerText = content[lang]['title'];
            document.getElementById('cart-title').innerText = content[lang]['cartTitle'];
            document.getElementById('checkout-button').innerText = content[lang]['checkoutButton'];

            var navLinks = document.querySelectorAll('.nav-links > li > a');
            navLinks[0].innerText = content[lang]['nav']['home'];
            navLinks[1].innerText = content[lang]['nav']['instruments'];
            navLinks[2].innerText = content[lang]['nav']['contact'];

            // 更新内容
            var sections = document.querySelectorAll('.section');
            sections.forEach(function(section) {
                if (section.classList.contains('active')) {
                    updateContent(section.id);
                }
            });

            // 更新购物车
            updateCart();

            // 更新菜单
            generateInstrumentMenu();
        }

        // 显示指定板块
        function showSection(sectionId) {
            var sections = document.querySelectorAll('.section');
            sections.forEach(function(section) {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            updateContent(sectionId);

            // 关闭所有打开的菜单
            closeAllMenus();
        }

        // 更新内容
        function updateContent(sectionId) {
            if (sectionId === 'home' || sectionId === 'contact') {
                document.querySelector('#' + sectionId + ' h2').innerText = content[currentLanguage][sectionId]['title'];
                document.querySelector('#' + sectionId + ' p').innerText = content[currentLanguage][sectionId]['content'];
            } else if (sectionId === 'instruments') {
                document.querySelector('#instruments h2').innerText = content[currentLanguage]['instruments']['title'];
                generateProductList();
            }
        }

        // 生成乐器菜单
        function generateInstrumentMenu() {
            var menu = document.getElementById('instrument-menu');
            menu.innerHTML = '';
            var categories = content[currentLanguage]['instruments']['categories'];
            for (var category in categories) {
                var li = document.createElement('li');

                var a = document.createElement('a');
                a.href = '#';
                a.className = 'dropdown-toggle';
                a.innerText = category;
                a.onclick = (function(cat, event) {
                    return function(event) {
                        event.preventDefault();
                        toggleSubMenu(event.target);
                    };
                })(category);

                li.appendChild(a);

                var subUl = document.createElement('ul');
                subUl.className = 'dropdown-menu';
                for (var subCategory in categories[category]) {
                    var subLi = document.createElement('li');

                    var subA = document.createElement('a');
                    subA.href = '#';
                    subA.className = 'dropdown-toggle';
                    subA.innerText = subCategory;
                    subA.onclick = (function(cat, subCat, event) {
                        return function(event) {
                            event.preventDefault();
                            toggleSubMenu(event.target);
                        };
                    })(category, subCategory);

                    subLi.appendChild(subA);

                    var subSubUl = document.createElement('ul');
                    subSubUl.className = 'dropdown-menu';

                    for (var productName in categories[category][subCategory]) {
                        var productLi = document.createElement('li');
                        var productA = document.createElement('a');
                        productA.href = '#';
                        productA.innerText = productName;
                        productA.onclick = (function(cat, subCat, prodName) {
                            return function(event) {
                                event.preventDefault();
                                showSection('instruments');
                                filterProducts(cat, subCat, prodName);
                            };
                        })(category, subCategory, productName);
                        productLi.appendChild(productA);
                        subSubUl.appendChild(productLi);
                    }

                    subLi.appendChild(subSubUl);
                    subUl.appendChild(subLi);
                }
                li.appendChild(subUl);
                menu.appendChild(li);
            }
        }

        // 切换菜单显示
        function toggleMenu(event) {
            event.preventDefault();
            var parentLi = event.target.parentElement;
            parentLi.classList.toggle('active');
            closeOtherMenus(parentLi);
        }

        // 切换子菜单显示
        function toggleSubMenu(target) {
            var parentLi = target.parentElement;
            parentLi.classList.toggle('active');
            closeOtherMenus(parentLi);
        }

        // 关闭其他菜单
        function closeOtherMenus(currentLi) {
            var allMenus = document.querySelectorAll('.nav-links li');
            allMenus.forEach(function(li) {
                if (li !== currentLi) {
                    li.classList.remove('active');
                }
            });
        }

        // 关闭所有菜单
        function closeAllMenus() {
            var allMenus = document.querySelectorAll('.nav-links li');
            allMenus.forEach(function(li) {
                li.classList.remove('active');
            });
        }

        // 生成乐器列表
        function generateProductList() {
            var productList = document.getElementById('product-list');
            productList.innerHTML = '';
            var categories = content[currentLanguage]['instruments']['categories'];
            for (var category in categories) {
                for (var subCategory in categories[category]) {
                    for (var productName in categories[category][subCategory]) {
                        var product = categories[category][subCategory][productName];
                        createProductCard(productName, product);
                    }
                }
            }
        }

        // 创建乐器卡片
        function createProductCard(name, product) {
            var productList = document.getElementById('product-list');
            var productCard = document.createElement('div');
            productCard.className = 'product-card';

            var productImage = document.createElement('div');
            productImage.className = 'product-image';
            productImage.style.backgroundImage = 'url(' + product.image + ')';
            productCard.appendChild(productImage);

            var productInfo = document.createElement('div');
            productInfo.className = 'product-info';

            var h3 = document.createElement('h3');
            h3.innerText = name;
            productInfo.appendChild(h3);

            var p = document.createElement('p');
            p.innerText = product.description;
            productInfo.appendChild(p);

            var priceP = document.createElement('div');
            priceP.className = 'price';
            priceP.innerText = content[currentLanguage]['currency'] + product.price;
            productInfo.appendChild(priceP);

            var button = document.createElement('button');
            button.innerText = content[currentLanguage]['addToCart'];
            button.onclick = function() {
                addToCart(name, product.price);
            };
            productInfo.appendChild(button);

            productCard.appendChild(productInfo);
            productList.appendChild(productCard);
        }

        // 过滤乐器列表
        function filterProducts(category, subCategory, productName) {
            var productList = document.getElementById('product-list');
            productList.innerHTML = '';
            var categories = content[currentLanguage]['instruments']['categories'];
            if (categories[category]) {
                if (subCategory) {
                    if (productName) {
                        var product = categories[category][subCategory][productName];
                        createProductCard(productName, product);
                    } else {
                        var products = categories[category][subCategory];
                        for (var name in products) {
                            var product = products[name];
                            createProductCard(name, product);
                        }
                    }
                } else {
                    for (var subCat in categories[category]) {
                        var products = categories[category][subCat];
                        for (var name in products) {
                            var product = products[name];
                            createProductCard(name, product);
                        }
                    }
                }
            }
        }

        // 添加到购物车
        function addToCart(name, price) {
            cart.push({name: name, price: price});
            updateCart();
        }

        // 更新购物车
        function updateCart() {
            var cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            var total = 0;
            if (cart.length === 0) {
                var li = document.createElement('li');
                li.innerText = content[currentLanguage]['emptyCart'];
                cartItems.appendChild(li);
                document.getElementById('cart-total').innerText = '';
            } else {
                cart.forEach(function(item) {
                    var li = document.createElement('li');
                    li.innerText = item.name + ' - ' + content[currentLanguage]['currency'] + item.price;
                    cartItems.appendChild(li);
                    total += item.price;
                });
                document.getElementById('cart-total').innerText = content[currentLanguage]['total'] + ': ' + content[currentLanguage]['currency'] + total;
            }
        }

        // 结算
        function checkout() {
            if (cart.length === 0) {
                alert(content[currentLanguage]['emptyCart']);
            } else {
                alert(content[currentLanguage]['checkoutMessage']);
                cart = [];
                updateCart();
            }
        }

        // 点击页面其他地方时关闭菜单
        document.addEventListener('click', function(event) {
            var isClickInsideMenu = event.target.closest('.nav-links');
            if (!isClickInsideMenu) {
                closeAllMenus();
            }
        });

        // 初始化页面
        window.onload = function() {
            switchLanguage('zh');
            generateInstrumentMenu();
            showSection('home');
        };
    </script>
</body>
</html>
